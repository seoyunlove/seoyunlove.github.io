<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>ìˆ˜ìœ ëŸ‰ ì²´í¬</title>
  <meta property="og:type" content="website">
  <meta property="og:title" content="ìˆ˜ìœ ëŸ‰ ì²´í¬">
  <link rel="shortcut icon" href="https://www.apple.com/favicon.ico">
  <link rel="apple-touch-icon" href="https://www.apple.com/favicon.ico">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
  <style type="text/css">
    body {
      padding: 0;
      margin: 10px;
    }

    /* The side navigation menu */

    .sidenav {
      height: 100%;
      /* 100% Full-height */
      width: 0;
      /* 0 width - change this with JavaScript */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Stay on top */
      top: 0;
      /* Stay at the top */
      left: 0;
      background-color: #F47983;
      /* Black*/
      overflow-x: hidden;
      /* Disable horizontal scroll */
      padding-top: 60px;
      /* Place content 60px from the top */
      transition: 0.5s;
      /* 0.5 second transition effect to slide in the sidenav */
    }

    /* The navigation menu links */

    .sidenav a {
      padding: 8px 8px 8px 32px;
      text-decoration: none;
      font-size: 25px;
      color: white;
      display: block;
      transition: 0.3s;
    }

    /* When you mouse over the navigation links, change their color */

    .sidenav a:hover {
      color: #f1f1f1;
    }

    /* Position and style the close button (top right corner) */

    .sidenav .closebtn {
      position: absolute;
      top: 0;
      right: 25px;
      font-size: 36px;
      margin-left: 50px;
    }

    .alert {
      margin-bottom: 10px !important;
    }

    /* Style page content - use this if you want to push the page content to the right when you open the side navigation */

    #main {
      transition: margin-left .5s;
      padding: 20px;
    }

    /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */

    @media screen and (max-height: 450px) {
      .sidenav {
        padding-top: 15px;
      }
      .sidenav a {
        font-size: 18px;
      }
    }
  </style>
</head>

<body>
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="#title" onclick="closeNav()">ì˜¤ëŠ˜</a>
    <a href="#vh" onclick="closeNav()">ìˆ˜ìœ  ê¸°ë¡ ë³´ê¸°</a>
    <a href="#spe" onclick="closeNav()">ê¸°ë…ì¼</a>
    <a href="#lv" onclick="closeNav()">ì„œìœ¤ì•„ ì‚¬ë‘í•´</a>
  </div>
  <h5 id="title" onclick="openNav()"></h5>
  <button type="button" class="btn btn-secondary" style="width:100%;" onclick="add(70);">70 (2 ìŠ¤í‘¼)</button>
  <button type="button" class="btn btn-primary" style="width:100%;margin-top:10px;" onclick="add(100);">100 (3 ìŠ¤í‘¼)</button>
  <button type="button" class="btn btn-success" style="width:100%;margin-top:10px;" onclick="add(135);">135 (4 ìŠ¤í‘¼)</button>
  <button type="button" class="btn btn-danger" style="width:100%;margin-top:10px;" onclick="add(170);">170 (5 ìŠ¤í‘¼)</button>
  <button type="button" class="btn btn-warning" style="width:100%;margin-top:10px;" onclick="add(200);">200 (6 ìŠ¤í‘¼)</button>
  <button type="button" class="btn btn-info" style="width:100%;margin-top:10px;" onclick="add(235);">235 (7 ìŠ¤í‘¼)</button>
  <div class="input-group" style="margin-top: 10px;">
    <input type="number" class="form-control" id="nn">
    <span class="input-group-btn">
      <button class="btn btn-default" type="button" onclick="add('a');">ì‚¬ë‘í•´</button>
    </span>
  </div>
  <div class="form-check" style="margin-top: 10px;">
    <input class="form-check-input" type="checkbox" value="" id="vdd" onclick="chvd()">
    <label class="form-check-label" for="vdd">
      ë¹„íƒ€ë¯¼D ì„­ì·¨ (ë§¤ì¼ ë°˜ë“œì‹œ í•„ìˆ˜ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ğŸ‘§)
    </label>
  </div>
  <h5 id="h" style="margin-top:10px;" onclick="openNav()"></h5>
  <div id="hist">
  </div>
  <h5 id="vh" style="margin-top:10px;" onclick="openNav()">ğŸ—“ìˆ˜ìœ  ê¸°ë¡</h5>
  <div id="listh"></div>
  <h5 id="vh" style="margin-top:10px;" onclick="openNav()">ğŸ‚ê¸°ë…ì¼</h5>
  <div id="spe"></div>
  <button onclick="dspp('r')" class="btn btn-default dropdown-toggle" type="button" style="width:100%" aria-expanded="false">+ ê¸°ë…ì¼ ë”ë³´ê¸°
    <span class="caret"></span>
  </button>
  <script>
    // localStorage.setItem('shistory', null)
    // localStorage.setItem('totals', null)
    // localStorage.setItem('todayTotal', null)

    var fdv = 100
    var lff = 1
    function dspp(r) {
      var sd
      var days = []
      for (var q = 0; q <= 11; q++) {
        fdv += 100
        days.push(fdv)
      }
      var rs = ''
      for (var i = 0; i < days.length; i++) {
        sd = new Date(2017, 10, 7)
        sd.setDate(parseInt(sd.getDate()) + parseInt(days[i]) - 1)
        var rd = sd.getFullYear() + 'ë…„ ' + (sd.getMonth() + 1) + "ì›” " + sd.getDate() + "ì¼"

        var ss = '<div class="alert alert-' + (i % 2 === 0 ? 'primary' : 'success') + '" role="alert"><a class="alert-link">' + days[i] + 'ì¼</a> ' + rd + '</div>'
        rs += ss

        if ((days[i] <= 365 * lff) && (365 * lff <= days[i] + 100)) {
          if (sd.getFullYear() == 2018) days[i] = 'ì²« ëŒ'
          if (sd.getFullYear() == 2019) days[i] = 'ë‘ ëŒ'
          if (sd.getFullYear() > 2019) {
            days[i] = (sd.getFullYear() - 2018 + 1) + 'ë²ˆì§¸ ìƒì¼'
          }
          lff++

          rd = sd.getFullYear() + 'ë…„ 11ì›” 7ì¼'
          var ss = '<div class="alert" role="alert"><a class="alert-link">ğŸ‚' + days[i] + '</a> ' + rd + ' ğŸ‰</div>'
          rs += ss
        }
      }

      if (r) {
        document.getElementById('spe').innerHTML += rs
      } else {
        document.getElementById('spe').innerHTML = rs
      }

    }
    function dday() {
      var sd = new Date()
      var strDate1 = "2017-11-7";
      var strDate2 = sd.getFullYear() + '-' + (sd.getMonth() + 1) + '-' + sd.getDate()
      var arr1 = strDate1.split('-');
      var arr2 = strDate2.split('-');
      var dat1 = new Date(arr1[0], arr1[1], arr1[2]);
      var dat2 = new Date(arr2[0], arr2[1], arr2[2]);

      var diff = dat2 - dat1;
      var currDay = 24 * 60 * 60 * 1000;
      var currMonth = currDay * 30;// ì›” ë§Œë“¬
      var currYear = currMonth * 12; // ë…„ ë§Œë“¬
      var ldd = parseInt(diff / currDay) + 1
      var lm = parseInt(ldd / 30)
      var dl = ldd % 30
      document.getElementById('h').innerText = 'ğŸ’–+' + (ldd) + ' (' + lm + 'ê°œì›” ' + dl + 'ì¼) ' + rtt() + 'ml'
    }

    function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
    }

    /* Set the width of the side navigation to 0 */
    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
    }

    function chvd() {
      if (vit.indexOf(getd('r')) == -1) {
        vit.push(getd('r'))
        localStorage.setItem('vit', JSON.stringify(vit))
      } else {
        vit = vit.filter(function (v) { return v != getd('r') })
        localStorage.setItem('vit', JSON.stringify(vit))
      }
      lis()
    }

    function vvd() {
      if (vit.indexOf(getd('r')) !== -1) {
        document.getElementById('vdd').checked = true
      } else {
        document.getElementById('vdd').checked = false
      }
    }
    function z(n) { return (n < 10 ? '0' : '') + n }

    var hoptions = { hour: "2-digit", minute: "2-digit" }
    var options = { weekday: 'long', month: 'long', day: 'numeric' }
    var todayTotal = parseInt(localStorage.getItem('todayTotal')) || 0
    var shistory = JSON.parse(localStorage.getItem('shistory')) || []
    shistory = shistory.filter(function(h){
        return (h.time !=='ì˜¤ì „ 2:00' && h.i !=='4ì›” 11ì¼')
    })
    var totals = []
    var vit = JSON.parse(localStorage.getItem('vit')) || []
    vit.push('3ì›” 27ì¼')
    for (var ri = 0; ri < shistory.length; ri++) {
      if (shistory[ri].i && shistory[ri].i.indexOf('ì¼') == -1) {
        shistory[ri].i += 'ì¼'
      }
      if (totals.indexOf(shistory[ri].i) == -1) {
        totals.push(shistory[ri].i)
      }
    }
    var tot = getd('r') 
    function getd(r) {
      var d = new Date()
      var h = d.getHours()
      var n = (h < 12 ? 'ì˜¤ì „ ' : 'ì˜¤í›„ ') + (h % 12 || 12) + ':' + z(d.getMinutes()) + ' '

      return r ? h < 2 ? d.setDate(d.getDate() - 1) && (d.getMonth() + 1) + "ì›” " + d.getDate() + "ì¼" : (d.getMonth() + 1) + "ì›” " + d.getDate() + "ì¼" : n
    }
    var td = getd('r')
    function rem(i) {
      document.getElementById('r' + i).style.display = "none"
      tdaa = shistory.find(function (w) { return w.id == i })
      shistory = shistory.filter(function (shh) { return shh.id != i })
      localStorage.setItem('shistory', JSON.stringify(shistory))
      document.getElementById('title').innerHTML = 'ğŸ¼' + tot + ' ' + rtt() + 'ml'
      lis()
      dday()
    }
    function det(t) {
      var rs = ''
      for (var i = shistory.length - 1; i >= 0; i--) {
        if (shistory[i].i.indexOf('ì¼') == -1) {
          shistory[i].i += 'ì¼'
        }
        if (shistory[i].i == t) {
          var ss = '<div><a class="alert-link">' + shistory[i].time + '</a>ğŸ¼' + shistory[i].ml + 'ml</div>'
          rs += ss
        }
      }
      return rs
    }
    function lis() {
      var hhistory = shistory
      hhistory.push({
      time: 'ì˜¤ì „ 2:00',
      ml: 170,
      i: '4ì›” 11ì¼',
      id: 'i' + Math.random() + '' + Math.random()
    })
      for (var ri = 0; ri < hhistory.length; ri++) {
        if (hhistory[ri].i && hhistory[ri].i.indexOf('ì¼') == -1) {
          hhistory[ri].i += 'ì¼'
        }
        if (totals.indexOf(hhistory[ri].i) == -1) {
          totals.push(hhistory[ri].i)
        }
      }
      document.getElementById('listh').innerHTML = ''
      for (var i = totals.length - 1; i >= 0; i--) {
        var tam = 0

        for (var ai = hhistory.length - 1; ai >= 0; ai--) {
          if (hhistory[ai].i.indexOf('ì¼') == -1) {
            hhistory[ai].i += 'ì¼'
          }
          if (hhistory[ai].i == totals[i]) {
            tam += parseInt(hhistory[ai].ml)
          }
        }

        var vdv = vit.indexOf(totals[i]) == -1 ? '' : ' âœ…ë¹„íƒ€ë¯¼ D'
        if (totals[i].indexOf('ì¼') == -1) {
          totals[i] += 'ì¼'
        }

        var sii = '<div id="c' + i + '" class="collapse">' + det(totals[i]) + '</div>'
        var ss = '<div onclick="tss(c' + i + ')" class="alert alert-' + (i % 2 === 0 ? 'warning' : 'info') + '" role="alert"><a class="alert-link">' + totals[i] + '</a> ğŸ“Š' + tam + 'ml' + vdv + sii + '</div>'
        document.getElementById('listh').innerHTML += ss
      }
    }
    function tss(i) {
      var x = i;
      if (x.style.display === "none" || !x.style.display) {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
    function rtt() {
      var i = totals.length - 1;
      var tam = 0
      for (var ai = shistory.length - 1; ai >= 0; ai--) {
        if (shistory[ai].i.indexOf('ì¼') == -1) {
          shistory[ai].i += 'ì¼'
        }
        if (totals[i] && totals[i].indexOf('ì¼') == -1) {
          totals[i] += 'ì¼'
        }
        if (shistory[ai].i == getd('r')) {
          tam += parseInt(shistory[ai].ml)
        }
      }
      return tam
    }
    function gh() {
      for (var i = shistory.length - 1; i >= 0; i--) {
        if (shistory[i].i.indexOf('ì¼') == -1) {
          shistory[i].i += 'ì¼'
        }
        if (shistory[i].i == getd('r')) {
          var ss = '<div id="r' + shistory[i].id + '" class="alert alert-' + (i % 2 === 0 ? 'warning' : 'info') + '" role="alert"><a href="#" class="alert-link">' + shistory[i].time + '</a>ğŸ¼' + shistory[i].ml + 'ml<button id="' + shistory[i].id + '" type="button" class="close" data-dismiss="alert" aria-label="ì·¨ì†Œ" onclick="rem(\'' + shistory[i].id + '\')"><span aria-hidden="true">&times;</span></button></div>'
          document.getElementById('hist').innerHTML += ss
        }
      }
      vvd()
    }

    function add(a) {
      if (a == 'null' || a == null) return
      if (a == 'a') {
        a = parseInt(document.getElementById('nn').value)
      }
      if (isNaN(a)) return

      var d = new Date()
      var h = d.getHours()
      var n = (h < 12 ? 'ì˜¤ì „' : 'ì˜¤í›„')
      var hh = (h % 12 || 12)
      if (td != getd('r') && (n == 'ì˜¤í›„' || n == 'ì˜¤ì „' && hh >= 2)) {
        todayTotal = 0
        tot = getd('r')

        if (totals.indexOf(getd('r')) === -1) {
          totals.push(getd('r'))
          localStorage.setItem(totals, JSON.stringify(totals))
        }
      }
      todayTotal += a
      shistory.push({
        time: getd(),
        ml: a,
        i: getd('r'),
        id: 'i' + Math.random() + '' + Math.random()
      })
      localStorage.setItem('todayTotal', todayTotal)
      document.getElementById('title').innerText = 'ğŸ¼' + tot + ' ' + rtt() + 'ml'
      document.getElementById('hist').innerHTML = ''
      localStorage.setItem('shistory', JSON.stringify(shistory))
      gh()
      lis()
      dday()
    }
    window.onload = function () {
      var d = new Date()
      var h = d.getHours()
      var n = (h < 12 ? 'ì˜¤ì „' : 'ì˜¤í›„')
      var hh = (h % 12 || 12)
      if (td != getd('r') && (n == 'ì˜¤í›„' || n == 'ì˜¤ì „' && hh >= 2)) {
        todayTotal = 0
        tot = getd('r')

        if (totals.indexOf(getd('r')) === -1) {
          totals.push(getd('r'))
          localStorage.setItem(totals, JSON.stringify(totals))
        }
      }
      document.getElementById('title').innerHTML = 'ğŸ¼' + tot + ' ' + rtt() + 'ml'
      gh()
      dday()
      vvd()
      lis()
      dspp()
    }
  </script>
</body>

</html>
